<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
        "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="edu.cs.scu.dao.TaskDao">

    <resultMap id="taskList" type="taskBean">
        <result column="taskId" property="taskId"/>
        <result column="taskName" property="taskName"/>
        <result column="startTime" property="startTime"/>
        <result column="finishTime" property="finishTime"/>
        <result column="taskType" property="taskType"/>
        <result column="taskStatus" property="taskStatus"/>
        <result column="taskParam" property="taskParam"/>
    </resultMap>

    <insert id="addTask" parameterType="taskBean">
    INSERT INTO task (
        taskId,
        taskName,
        startTime,
        finishTime,
        taskType,
        taskStatus,
        taskParam)
    VALUES (
        #{taskId, jdbcType=INTEGER},
        #{taskName, jdbcType=VARCHAR},
        #{startTime, jdbcType=DATETIME},
        #{finishTime, jdbcType=DATETIME},
        #{taskType,jdbcType=VARCHAR},
        #{taskStatus,jdbcType=VARCHAR},
        #{taskParam,jdbcType=VARCHAR,typeHandler=edu.cs.scu.javautils.mybatisutils.handlerutils.JsonTypeHandlerUtil})
    </insert>

    <select id="getTaskCount" resultType="java.lang.Integer">
         SELECT count(1)
         FROM task
    </select>

    <select id="getTaskInfo" resultType="taskBean">
        SELECT taskId,taskName,startTime,finishTime,taskType,taskStatus,taskParam
        FROM task
    </select>

    <select id="getTaskById" resultType="taskBean">
        SELECT taskId,taskName,startTime,finishTime,taskType,taskStatus,taskParam
        FROM task
        WHERE id = #{0}
    </select>

</mapper>