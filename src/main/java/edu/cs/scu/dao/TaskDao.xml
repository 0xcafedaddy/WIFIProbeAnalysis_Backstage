<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
        "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="edu.cs.scu.dao.TaskDao">

    <insert id="addTask" parameterType="taskBean">
    INSERT INTO task (
        task_id,
        task_name,
        create_time,
        start_time,
        finish_time,
        task_type,
        task_status,
        task_param)
    VALUES (
        #{taskId, jdbcType=INTEGER},
        #{taskName, jdbcType=VARCHAR},
        #{createTime, jdbcType=VARCHAR},
        #{startTime, jdbcType=DATETIME},
        #{finishTime, jdbcType=DATETIME},
        #{taskType, jdbcType=VARCHAR},
        #{taskStatus, jdbcType=VARCHAR},
        #{taskParam, jdbcType=VARCHAR,typeHandler=edu.cs.scu.javautils.mybatisutils.handlerutils.JsonTypeHandlerUtil})
    </insert>

    <select id="getTaskCount" resultType="java.lang.Integer">
         SELECT count(1)
         FROM task
    </select>

    <select id="getTaskInfo" resultType="taskBean">
        SELECT task_id,task_name,create_time,start_time,finish_time,task_type,task_status,task_param
        FROM task
    </select>

    <select id="getTaskById" resultType="taskBean">
        SELECT task_id,task_name,create_time,start_time,finish_time,task_type,task_status,task_param
        FROM task
        WHERE task_id = #{0}
    </select>

</mapper>